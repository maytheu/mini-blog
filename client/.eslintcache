[{"/home/maytheu/Documents/code/mini-blog/client/src/index.js":"1","/home/maytheu/Documents/code/mini-blog/client/src/App.js":"2","/home/maytheu/Documents/code/mini-blog/client/src/store/store.js":"3","/home/maytheu/Documents/code/mini-blog/client/src/reportWebVitals.js":"4","/home/maytheu/Documents/code/mini-blog/client/src/component/Admin.js":"5","/home/maytheu/Documents/code/mini-blog/client/src/component/Detail.js":"6","/home/maytheu/Documents/code/mini-blog/client/src/component/Blog.js":"7","/home/maytheu/Documents/code/mini-blog/client/src/component/Error.js":"8","/home/maytheu/Documents/code/mini-blog/client/src/store/reducers/rootReducer.js":"9","/home/maytheu/Documents/code/mini-blog/client/src/store/actions/adminActions.js":"10","/home/maytheu/Documents/code/mini-blog/client/src/component/utils/Formfield.js":"11","/home/maytheu/Documents/code/mini-blog/client/src/component/utils/checkValidity.js":"12","/home/maytheu/Documents/code/mini-blog/client/src/store/actions/types.js":"13","/home/maytheu/Documents/code/mini-blog/client/src/store/reducers/adminReducers.js":"14","/home/maytheu/Documents/code/mini-blog/client/src/component/utils/url.js":"15","/home/maytheu/Documents/code/mini-blog/client/src/store/actions/blogActions.js":"16","/home/maytheu/Documents/code/mini-blog/client/src/store/reducers/blogReducers.js":"17","/home/maytheu/Documents/code/mini-blog/client/src/component/Login.js":"18","/home/maytheu/Documents/code/mini-blog/client/src/component/CheckLogin.js":"19","/home/maytheu/Documents/code/mini-blog/client/src/component/Wysiwyg.js":"20"},{"size":623,"mtime":1611834361505,"results":"21","hashOfConfig":"22"},{"size":1202,"mtime":1612176719655,"results":"23","hashOfConfig":"22"},{"size":465,"mtime":1611835687722,"results":"24","hashOfConfig":"22"},{"size":362,"mtime":1611792598880,"results":"25","hashOfConfig":"22"},{"size":7745,"mtime":1612438984116,"results":"26","hashOfConfig":"22"},{"size":7909,"mtime":1612830532253,"results":"27","hashOfConfig":"22"},{"size":2488,"mtime":1612827899859,"results":"28","hashOfConfig":"22"},{"size":308,"mtime":1611891993342,"results":"29","hashOfConfig":"22"},{"size":247,"mtime":1611839837142,"results":"30","hashOfConfig":"22"},{"size":709,"mtime":1611948603575,"results":"31","hashOfConfig":"22"},{"size":362,"mtime":1611921158075,"results":"32","hashOfConfig":"22"},{"size":290,"mtime":1611899481096,"results":"33","hashOfConfig":"22"},{"size":523,"mtime":1612369247493,"results":"34","hashOfConfig":"22"},{"size":377,"mtime":1611962955735,"results":"35","hashOfConfig":"22"},{"size":30,"mtime":1611792598880,"results":"36","hashOfConfig":"22"},{"size":2192,"mtime":1612825527603,"results":"37","hashOfConfig":"22"},{"size":883,"mtime":1612438984116,"results":"38","hashOfConfig":"22"},{"size":3068,"mtime":1612011796092,"results":"39","hashOfConfig":"22"},{"size":974,"mtime":1612015048181,"results":"40","hashOfConfig":"22"},{"size":462,"mtime":1612208240916,"results":"41","hashOfConfig":"22"},{"filePath":"42","messages":"43","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"44"},"j0trp4",{"filePath":"45","messages":"46","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"44"},{"filePath":"47","messages":"48","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"44"},{"filePath":"49","messages":"50","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"44"},{"filePath":"51","messages":"52","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"53","usedDeprecatedRules":"44"},{"filePath":"54","messages":"55","errorCount":1,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"56","messages":"57","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"44"},{"filePath":"58","messages":"59","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"44"},{"filePath":"60","messages":"61","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"44"},{"filePath":"62","messages":"63","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"44"},{"filePath":"64","messages":"65","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"44"},{"filePath":"66","messages":"67","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"44"},{"filePath":"68","messages":"69","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"44"},{"filePath":"70","messages":"71","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"72","usedDeprecatedRules":"44"},{"filePath":"73","messages":"74","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"44"},{"filePath":"75","messages":"76","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"44"},{"filePath":"77","messages":"78","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"79","usedDeprecatedRules":"44"},{"filePath":"80","messages":"81","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"44"},{"filePath":"82","messages":"83","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"84","usedDeprecatedRules":"44"},{"filePath":"85","messages":"86","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"44"},"/home/maytheu/Documents/code/mini-blog/client/src/index.js",[],["87","88"],"/home/maytheu/Documents/code/mini-blog/client/src/App.js",[],"/home/maytheu/Documents/code/mini-blog/client/src/store/store.js",[],"/home/maytheu/Documents/code/mini-blog/client/src/reportWebVitals.js",[],"/home/maytheu/Documents/code/mini-blog/client/src/component/Admin.js",["89","90"],"import \"./blog.css\";\nimport React, { Component } from \"react\";\nimport { connect } from \"react-redux\";\nimport { EditorState } from \"draft-js\";\nimport { convertFromHTML, convertToHTML } from \"draft-convert\";\n\nimport Formfield from \"./utils/Formfield\";\nimport { checkValidity } from \"./utils/checkValidity\";\nimport Wysiwyg from \"./Wysiwyg\";\nimport { editPost, post, upload } from \"../store/actions/blogActions\";\nimport axios from \"axios\";\nimport { SERVER } from \"./utils/url\";\n\nclass Admin extends Component {\n  state = {\n    editorState: EditorState.createEmpty(),\n    convertedContent: null,\n    page: \"Add New Post\",\n    isLoading: false,\n    url: \"\",\n    imageUpload: null,\n    data: {\n      title: {\n        type: \"text\",\n        name: \"title\",\n        value: \"\",\n        validation: {\n          required: true,\n        },\n        valid: false,\n      },\n      headline: {\n        type: \"text\",\n        value: \"\",\n        name: \"headline\",\n        valid: false,\n      },\n      publish: {\n        type: \"text\",\n        value: \"\",\n        name: \"Enter 1 to publish\",\n        validation: {\n          required: true,\n        },\n        valid: \"false\",\n      },\n    },\n    success: \"\",\n  };\n\n  updateField = (data, editorState) => {\n    const newFormData = { ...this.state.data };\n    for (let key in newFormData) {\n      newFormData[key].value = data[key];\n      newFormData[key].valid = true;\n    }\n\n    this.setState({\n      data: newFormData,\n      editorState,\n    });\n  };\n\n  componentDidMount() {\n    document.title = this.state.page;\n    if (this.props.match.params.page !== undefined) {\n      let page = this.props.match.params.page;\n      this.setState({ page: `Edit ${page}` });\n      document.title = \"Edit Post\";\n      console.log(this.props.isBlog.post.post);\n      let editorState = EditorState.createWithContent(\n        convertFromHTML(this.props.isBlog.post.post.blog)\n      );\n      this.updateField(this.props.isBlog.post.post, editorState);\n      console.log(this.state);\n    }\n  }\n\n  changeSetEditorState = (editorState) => {\n    this.setState({\n      editorState,\n    });\n    this.convertContentToHTML();\n  };\n\n  convertContentToHTML = () => {\n    let currentContentAsHTML = convertToHTML(\n      this.state.editorState.getCurrentContent()\n    );\n    this.setState({ convertedContent: currentContentAsHTML });\n  };\n\n  inputValue = (element) => {\n    const updatedOrderForm = {\n      ...this.state.data,\n    };\n    const updatedFormElement = {\n      ...updatedOrderForm[element],\n    };\n    updatedFormElement.value = element.event.target.value;\n    updatedFormElement.valid = checkValidity(\n      updatedFormElement.value,\n      updatedFormElement.validation\n    );\n    updatedOrderForm[element.id] = updatedFormElement;\n\n    let formValid = true;\n    // for(let keyInput in updatedOrderForm){\n    formValid = updatedOrderForm[element.id].valid && formValid;\n    // }\n\n    this.setState({ data: updatedOrderForm, isValidForm: formValid });\n  };\n\n  uploadFile = (event) => {\n    // const files = {...this.state.upload.image}\n    // // const images[event] = {...files}\n    // files = event.target.files[0]\n    // // files = images\n    console.log(\"files\");\n    console.log(event.target.files[0]);\n    this.setState({ imageUpload: event.target.files[0] });\n  };\n\n  submitForm = (event, id) => {\n    event.preventDefault();\n    this.setState({ isLoading: true });\n    let submit = {};\n    let validForm = true;\n    for (let key in this.state.data) {\n      console.log(this.state.data[key]);\n      submit[key] = this.state.data[key].value;\n      validForm = this.state.data[key].valid && validForm;\n    }\n\n    let timeStamp = new Date();\n    let submitDetails = {\n      title: submit.title,\n      headline: submit.headline,\n      publish: submit.publish,\n      blog: this.state.convertedContent,\n      publishedDate: timeStamp.getTime(),\n    };\n    console.log(submitDetails);\n    if (validForm) {\n      if (this.state.page === \"Add New Post\") {\n        this.props.dispatch(post(submitDetails)).then((response) => {\n          if (response.payload.success) {\n            this.setState({ isLoading: false });\n            this.props.history.push(\"/user\");\n          } else {\n            this.setState({\n              isLoading: false,\n              success: \"Post Not Saved, Review Your Post\",\n            });\n          }\n        });\n      } else {\n        this.props.dispatch(editPost(submitDetails, id)).then((response) => {\n          if (response.payload.success) {\n            this.setState({ isLoading: false });\n            this.props.history.push(\"/user\");\n          } else {\n            this.setState({\n              isLoading: false,\n              success: \"Post Not Edited, Review Your Post\",\n            });\n          }\n        });\n      }\n    }\n  };\n\n  submitImage = (event) => {\n    event.preventDefault();\n    const target = event.target;\n    const data = new FormData(target);\n    for (var [key, value] of data.entries()) {\n      console.log(value);\n    }\n    const config = {\n      header: { \"content-type\": \"multipart/form-data\" },\n    };\n    data.append(\"file\", this.state.imageUpload);\n    console.log(data)\n    // data.append(\"file\", this.state.imageUpload, this.state.imageUpload.name);\n    //  this.props.dispatch(upload(value)).then((response) => console.log(response));\n    axios.post(`${SERVER}user/upload`, data, config).then((response) => {\n      console.log(response);\n    });\n  };\n\n  render() {\n    const state = this.state.data;\n    console.log({ state });\n    console.log(this.state.convertedContent);\n    return (\n      <div className=\"main\">\n        <div className=\"flex-center flex-column\">\n          <h2>{this.state.page}</h2>\n          <div>\n            <form onSubmit={(event) => this.submitForm(event)}>\n              <Formfield\n                id={\"title\"}\n                type={state.title.type}\n                placeholder={state.title.name}\n                name={state.title.name}\n                value={state.title.value}\n                change={(element) => this.inputValue(element)}\n              />\n              <Formfield\n                id={\"headline\"}\n                type={state.headline.type}\n                placeholder={state.headline.type}\n                name={state.headline.name}\n                value={state.headline.value}\n                change={(element) => this.inputValue(element)}\n              />\n              <Formfield\n                id={\"publish\"}\n                type={state.publish.type}\n                placeholder={state.publish.name}\n                name={state.publish.name}\n                value={state.publish.value}\n                change={(element) => this.inputValue(element)}\n              />\n              <Wysiwyg\n                editorState={this.state.editorState}\n                setEditorState={this.changeSetEditorState}\n              />\n              <button\n                className=\"btn\"\n                type=\"submit\"\n                onClick={(event, id) =>\n                  this.submitForm(event, this.props.isBlog.post.post._id)\n                }\n              >\n                Post Article\n              </button>\n            </form>\n            <form onSubmit={(event) => this.submitImage(event)}>\n              <input type=\"file\" name=\"file\" onChange={this.uploadFile} />\n\n              <button\n                className=\"btn\"\n                onSubmit={(event) => this.submitImage(event)}\n              >\n                Get Image UrlI\n              </button>\n            </form>\n            <div>{this.state.url}</div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nconst mapStateToProps = (state) => {\n  return {\n    isBlog: state.blog,\n    isAdmin: state.admin,\n  };\n};\n\nexport default connect(mapStateToProps)(Admin);\n","/home/maytheu/Documents/code/mini-blog/client/src/component/Detail.js",["91"],"/home/maytheu/Documents/code/mini-blog/client/src/component/Blog.js",[],"/home/maytheu/Documents/code/mini-blog/client/src/component/Error.js",[],"/home/maytheu/Documents/code/mini-blog/client/src/store/reducers/rootReducer.js",[],"/home/maytheu/Documents/code/mini-blog/client/src/store/actions/adminActions.js",[],"/home/maytheu/Documents/code/mini-blog/client/src/component/utils/Formfield.js",[],"/home/maytheu/Documents/code/mini-blog/client/src/component/utils/checkValidity.js",[],"/home/maytheu/Documents/code/mini-blog/client/src/store/actions/types.js",[],"/home/maytheu/Documents/code/mini-blog/client/src/store/reducers/adminReducers.js",["92"],"import { ADMIN_LOGIN, ADMIN_AUTH, ADMIN_LOGOUT } from \"../actions/types\";\n\nexport default function (state = {}, action) {\n  switch (action.type) {\n    case ADMIN_LOGIN:\n      return { ...state, user: action.payload };\n    case ADMIN_AUTH:\n      return { ...state, user: action.payload };\n    case ADMIN_LOGOUT:\n      return { ...state };\n    default:\n      return state;\n  }\n}\n","/home/maytheu/Documents/code/mini-blog/client/src/component/utils/url.js",[],"/home/maytheu/Documents/code/mini-blog/client/src/store/actions/blogActions.js",[],"/home/maytheu/Documents/code/mini-blog/client/src/store/reducers/blogReducers.js",["93"],"import {\n  DELETE_COMMENT,\n  DELETE_POST,\n  DETAILED_POST,\n  DISLIKE,\n  EDIT_POST,\n  LIKE,\n  POST,\n  POST_COMMENT,\n  VIEW_POST,\n} from \"../actions/types\";\n\nconst initialization = {\n  post: {},\n};\n\nexport default function (state = initialization, action) {\n  switch (action.type) {\n    case VIEW_POST:\n      return { ...state, post: action.payload };\n    case DETAILED_POST:\n      return { ...state, post: action.payload };\n    case DELETE_POST:\n      return { ...state, post: action.payload };\n    case POST:\n      return { ...state };\n    case DELETE_COMMENT:\n      return { ...state, comment: action.payload };\n    case EDIT_POST:\n      return { ...state, post: action.payload };\n    case POST_COMMENT:\n      return { ...state, comment: action.payload };\n    case LIKE:\n      return { ...state };\n    case DISLIKE:\n      return { ...state };\n    default:\n      return state;\n  }\n}\n","/home/maytheu/Documents/code/mini-blog/client/src/component/Login.js",[],"/home/maytheu/Documents/code/mini-blog/client/src/component/CheckLogin.js",["94"],"import React, { Component } from \"react\";\nimport { connect } from \"react-redux\";\n\nimport { authAdmin } from \"../store/actions/adminActions\";\n\nexport default function(ComposedClass, reload) {\n  class CheckLogin extends Component {\n    state = {\n      isLoading: true\n    }; \n\n    componentDidMount() {\n      this.props.dispatch(authAdmin()).then(() => {\n        let admin = this.props.isAdmin.user;\n        console.log(admin)\n        if (!admin.isUser) {\n          if (reload) { \n            this.props.history.push(\"/signin\");\n          } \n        } \n        this.setState({ loading: false });\n      });\n    }\n\n    render() {\n      if (this.state.loading) {\n        return (\n          <div className=\"loader\">\nlpwfotm          </div>\n        );\n      }\n      return <ComposedClass {...this.props} user={this.props.isAdmin} />;\n    }\n  }\n\n  function mapStateToProps(state) {\n    return {\n      isAdmin: state.admin\n    };\n  }\n\n  return connect(mapStateToProps)(CheckLogin);\n}","/home/maytheu/Documents/code/mini-blog/client/src/component/Wysiwyg.js",[],{"ruleId":"95","replacedBy":"96"},{"ruleId":"97","replacedBy":"98"},{"ruleId":"99","severity":1,"message":"100","line":10,"column":26,"nodeType":"101","messageId":"102","endLine":10,"endColumn":32},{"ruleId":"99","severity":1,"message":"103","line":178,"column":15,"nodeType":"101","messageId":"102","endLine":178,"endColumn":18},{"ruleId":"104","severity":2,"message":"105","line":284,"column":9,"nodeType":"101","messageId":"106","endLine":284,"endColumn":13},{"ruleId":"107","severity":1,"message":"108","line":3,"column":1,"nodeType":"109","endLine":14,"endColumn":2},{"ruleId":"107","severity":1,"message":"108","line":18,"column":1,"nodeType":"109","endLine":41,"endColumn":2},{"ruleId":"107","severity":1,"message":"108","line":6,"column":1,"nodeType":"109","endLine":43,"endColumn":2},"no-native-reassign",["110"],"no-negated-in-lhs",["111"],"no-unused-vars","'upload' is defined but never used.","Identifier","unusedVar","'key' is assigned a value but never used.","no-undef","'text' is not defined.","undef","import/no-anonymous-default-export","Unexpected default export of anonymous function","ExportDefaultDeclaration","no-global-assign","no-unsafe-negation"]